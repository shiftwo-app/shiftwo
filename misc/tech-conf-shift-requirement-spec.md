# 技術カンファレンス運営スタッフシフト管理アプリ — 要件定義ドラフト

## 1. 概要

- **目的 / 背景**  
  技術カンファレンス運営スタッフ（以下「スタッフ」）とスタッフリーダー（以下「リーダー」）向けに、複数ホール・複数役割のシフトを一元管理し、イベント当日の運営を円滑化する。
- **ゴール / 成功指標**
  - リーダーがシフト策定に要する時間を _50% 削減_
  - シフト確定後の当日トラブル件数 _0 件_（役割充足不足・休憩抜け漏れなど）
  - スタッフ満足度アンケートで _80% 以上_ が「希望が反映された」と回答

---

## 2. スコープ

| 項目                    | MVP (v1)             | 将来拡張 (v2+)      |
| ----------------------- | -------------------- | ------------------- |
| 基本のシフト閲覧 / 作成 | ✔︎                   |                     |
| スタッフ希望入力（Web） | ✔︎                   |                     |
| タイムテーブル連携      | ✔︎                   |                     |
| モバイル最適化          | ✔︎ (閲覧 + 簡易編集) | 高度編集 UI         |
| アラート & 通知         |                      | ✔︎ (メール / Slack) |
| エクスポート (PDF/CSV)  |                      | ✔︎                  |
| SSO (Google / GitHub)   |                      | ✔︎                  |

---

## 3. 利用者・権限

| ロール            | 説明             | 主な操作                                     |
| ----------------- | ---------------- | -------------------------------------------- |
| **リーダー**      | シフト作成責任者 | シフト CRUD / 役割設定 / 必要人数設定 / 承認 |
| **スタッフ**      | 当日運営要員     | 希望入力 / シフト確認                        |
| **管理者 (将来)** | システム管理     | ユーザ管理 / 権限付与                        |

---

## 4. 機能要件 (Functional Requirements)

### FR-1. タイムライン表示

1. スタッフまたは役割を縦軸、時間を横軸とするガントチャート風 UI を表示する。
2. ズームレベル：5, 10, 15, 30 分単位を切替可。

### FR-2. 役割カラー設定

1. リーダーは役割ごとにカラーコードを設定できる。
2. タイムライン上のシフトカード背景にカラーを反映。

### FR-3. レスポンシブ対応

- 幅 360 px 以上のスマートフォンで閲覧・基本操作（閲覧 + シフトドラッグ編集）可能。

### FR-4. シフト作成 / 編集

| ID     | 内容                                                                                                   |
| ------ | ------------------------------------------------------------------------------------------------------ |
| FR‑4‑1 | **時間単位設定**: リーダーはイベント毎にデフォルト時間粒度 (5/10/15/30 分) を選択できる                |
| FR‑4‑2 | **複数役割兼務**: スタッフ 1 名に連続または分割して複数役割を割当て可                                  |
| FR‑4‑3 | **必要人員管理**: 役割 × 時間帯に必要人数を入力し、ガイドライン充足率を UI で表示 (例: プログレスバー) |
| FR‑4‑4 | **希望オーバーライド可視化**: 希望と異なる割当カードにアイコン & 枠線で強調表示                        |

### FR-5. スタッフ希望・制約入力

| ID     | 内容                                                  |
| ------ | ----------------------------------------------------- |
| FR‑5‑1 | スタッフは希望休憩時間帯を入力 (ドラッグ or 時刻指定) |
| FR‑5‑2 | スタッフは担当希望役割を複数選択可 (1 日単位)         |
| FR‑5‑3 | フリーメモ入力欄 (200 文字)                           |

### FR-6. イベントタイムテーブル連携

| ID     | 内容                                                                     |
| ------ | ------------------------------------------------------------------------ |
| FR‑6‑1 | リーダーはセッション枠の開始・終了時刻、講演タイトル、部屋名を登録できる |
| FR‑6‑2 | タイムライン下部にタイムテーブルをオーバーレイ表示 / 非表示切替          |
| FR‑6‑3 | 複数ホールをタブ or 列切替で表示                                         |

### FR-7. シフト確認 & レポート

| ID     | 内容                                                                                                                   |
| ------ | ---------------------------------------------------------------------------------------------------------------------- |
| FR‑7‑1 | **ビュー切替**: 役割別 / スタッフ別 をトグルで切替                                                                     |
| FR‑7‑2 | **休憩計算**: (a) 休憩役割カード と (b) シフト間空白 (設定値以上, 例 15 分) を合算し、スタッフ別総休憩時間を計算・表示 |
| FR‑7‑3 | **CSV ダウンロード (将来)**: シフトを CSV にエクスポート                                                               |

---

## 5. 非機能要件 (NFR)

| NFR ID | 要件                 | 指標 / 基準                                        |
| ------ | -------------------- | -------------------------------------------------- |
| NFR‑1  | **表示速度**         | 主要画面 FCP ≤ 2 s (4G モバイル, 85th percentile)  |
| NFR‑2  | **同時編集耐性**     | v1: 単一リーダー編集のみ, v2: リアルタイム協調編集 |
| NFR‑3  | **ブラウザ対応**     | Chrome, Edge, Safari, Firefox 各最新 2 バージョン  |
| NFR‑4  | **アクセシビリティ** | WCAG 2.1 AA 準拠の配色コントラスト                 |
| NFR‑5  | **国際化**           | 日本語 UI (v1), 英語 (v2)                          |

---

## 6. 技術 & 制約

- **フロントエンド**: Next.js 14 (App Router) + TypeScript
- **UI コンポーネント**: MUI または shadcn/ui
- **カレンダー / ガントライブラリ候補**
  - [react-big-calendar] (MIT)
  - [fullcalendar] (MIT)
  - 独自描画 (SVG/Canvas)  
    → **要検討: MIT など無償ライセンスのみ採用可**
- **デプロイ / インフラ**: Docker → AWS Fargate または Vercel (要検討)
- **DB**: Supabase / Postgres 予定 (Docker compose)

---

## 7. 依存関係 & ステークホルダー

| 役割               | 氏名 / チーム | 関与                   |
| ------------------ | ------------- | ---------------------- |
| プロダクトオーナー | あなた        | 方向性決定 / 優先順位  |
| 開発リーダー       | (未定)        | 仕様策定 / 技術選定    |
| デザイナー         | (未定)        | UI/UX / カラーパレット |
| インフラ担当       | (未定)        | AWS / Docker           |

---

## 8. 既知のリスク / 懸念

1. ガント系 UI が複雑化 → 実装コスト増大
2. 同時編集機能は v1 でスコープ外にしないとスケジュール遅延の恐れ
3. スタッフ BYOD のためスマホ画面サイズ多様 (横スクロール UX)

---

## 9. スケジュール (案)

| マイルストーン  | 期限           | 備考                             |
| --------------- | -------------- | -------------------------------- |
| 要件確定        | **2025-04-30** | 本ドキュメント Fix               |
| プロトタイプ UI | 05-14          | ガント UI + スタッフ希望入力画面 |
| MVP 実装完了    | 06-15          | α テスト                         |
| 公開リリース    | 06-30          | カンファレンス 1 か月前          |

---

## 10. オープンクエスチョン

1. **認証方式**: Google / GitHub / email & password のどれを採用？
2. **権限レベル**: リーダー以外に「副リーダー」「閲覧専用」など追加要否？
3. **通知機能**: v1 からメール送信 or Slack DM を入れるか？
4. **タイムテーブルインポート**: CSV / JSON インポートは必要？
5. **タイムゾーン**: 国際カンファレンスの場合に UTC or 現地時刻対応は？
6. **当日実績**: 出退勤打刻や実績ログを取りたいか？
7. **外部カレンダー連携**: Google Calendar などへのエクスポート要否？
8. **データ保持期間**: シフト情報を何年間保存する？
9. **アクセシビリティ要件**: 視覚障害者向け音声読み上げ対応は v1 スコープ？
10. **ライセンス**: MIT 以外 (Apache‑2.0 など) も可か？

---

### 次のアクション

1. **オープンクエスチョン** に回答 or コメントをいただく
2. 追加・修正点を反映し、要件を確定
3. MVP 優先度 & スケジュールを最終合意

---
